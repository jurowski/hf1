
Encourage New Goals and Checkpoints
---------------------

(
when a new checkpoint is answered,
or when a new public goal is created
and if username != unknown
)


:::TODO:::
when a checkpoint is updated,
if username != unknown,
if it is a yes, and if the goal is public,
then enter it into encourage_items

when a goal is created,
if username != unknown,
if it is public,
then enter it into encourage_items

when a goal is saved by user, if it's "private", remove any entries from "encourage_items"

daily cron, remove any "encourage_items" of type checkpoint,
that have a checkpoint_date of > 1 day,
and remove any of type goal that have va goal_first_start_date of > 1 day

:::DONE:::

create table:
--- encourage_item ---
encourage_type_new_checkpoint_bool (index)
encourage_type_new_goal_bool (index)
checkpoint_id
checkpoint_status
checkpoint_date (index)
checkpoint_updated_at_datetime
goal_id (index)
goal_name
goal_category
goal_created_at_datetime
goal_publish
goal_first_start_date (index)
goal_daysstraight
goal_days_into_it
goal_success_rate_percentage
user_id (index)
user_name
user_email





Custom Teams
-----------------
i want to build my own custom team related to a goal


beneath my goal's team section it currently says:


Find an Open Team
(put me on a team with 3 others committed to an "Exercise" goal)

Start a 

Allow for someone to Build a Custom Team in which there are openings ... so that people can seek out open teams and choose rather than having to be randomly assigned



let me choose whether the team should restrict access for that goal itself (team-goal) or for the goal's general category (team-category)

if team-goal, make each team goal the child of a template (if my goal is not yet a child, copy it to a parent template)

suggest a team name, and let me edit it

do not allow random assignments to my custom team

let me be the owner of my team

let me choose how many people are on my custom team

let me craft an invite that has a link to start my goal (and if I have chosen category-level vs. goal-level, a link to start a custom or click from an array of templated goals in the same category)

let me send invites to team members

let my invite go to multiple email addresses separated by commas

(teamgoals) do not kick people off of my custom team for not checking in

do not let me quit a team that I am the leader of if there are other members
allow me to transfer ownership to another member of the team
notify every team member when a new member arrives
notify every team member when a member leaves
let me email the whole team
when emailing one team member ask me to consider including each of the others

when an invitee logs in, have an "invites" link at the top showing a red number and a listing of invites to review
when an invitee accepts, take them to goal creation
allow an invitee to silently ignore an invite (do not email me)
allow an invitee to decline an invite (email me)
keep reminding an invitee for a while until they take action

later: team chat board
(later: add an icon/mascot/avatar for our team)
(later: add a "fade or not" photo mosaic linked to each team member's last 7 days ... one row per person)


---------------------------------------------------------------
DONE BELOW
---------------------------------------------------------------

----------------------
mod table "teams"
----------------------
goal_template_parent_id (nil if category only)
custom # boolean, nil or false if randomized team)
owner_user_id

--------------
new table "team_invites"
--------------
team_id ### which team is this invite for
email_original ### email it was originally sent to
user_id ### once they sign up or if already signed up
goal_id ### once they accept the goal, which of their own goals is in the team
first_sent_date ### invite creation date
remind_until_date ### how long should we send reminders for
remind_every_n_days ### how frequently should we send reminders
last_reminded_date ### the last time a reminder was sent
declined_date ### if the end user declines (send notice to inviter)
ignored_date ### if the end user silently declines (do not send notice to inviter)
accepted_date ### if the end user accepts (send notice to all team members)


